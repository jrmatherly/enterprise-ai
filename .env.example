# Enterprise AI Platform - Environment Variables
# Copy this file to .env and update values for your environment
#
# Generate secrets with:
#   openssl rand -base64 32  (for NEXTAUTH_SECRET, SALT)
#   openssl rand -hex 32     (for ENCRYPTION_KEY)
#   openssl rand -base64 24 | tr -d '/+=' | head -c 32  (for passwords)

# ============================================
# Application
# ============================================
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=DEBUG
LOG_FORMAT=console  # "console" or "json"

# API Server (for running outside Docker)
API_HOST=0.0.0.0
API_PORT=8000

# Application database name (created by init script alongside 'langfuse')
APP_DB=eai

# ============================================
# PostgreSQL
# ============================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
# Generate with: `openssl rand -base64 24 | tr -d '/+=' | head -c 32`
POSTGRES_PASSWORD=your-postgres-password-here
# Langfuse uses 'langfuse' db, our app uses 'eai' db (created by init script)
POSTGRES_DB=langfuse
# Application database URL (uses 'eai' database) - for local dev outside Docker
DATABASE_URL=postgresql+asyncpg://postgres:your-postgres-password-here@localhost:5432/eai

# ============================================
# ClickHouse (Langfuse v3)
# ============================================
CLICKHOUSE_USER=clickhouse
# Generate with: `openssl rand -base64 24 | tr -d '/+=' | head -c 32`
CLICKHOUSE_PASSWORD=your-clickhouse-password-here

# ============================================
# Redis
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
# Generate with: `openssl rand -base64 24 | tr -d '/+=' | head -c 32`
REDIS_AUTH=your-redis-password-here

# ============================================
# Qdrant (Vector Database)
# ============================================
QDRANT_URL=http://localhost:6333
QDRANT_COLLECTION=documents
# QDRANT_API_KEY=  # Optional: API key if Qdrant auth is enabled

# ============================================
# MinIO (S3-compatible storage)
# ============================================
MINIO_ROOT_USER=minio
# Generate with: `openssl rand -base64 24 | tr -d '/+=' | head -c 32`
MINIO_ROOT_PASSWORD=your-minio-password-here

# ============================================
# Langfuse - Server Configuration
# ============================================
# IMPORTANT: Generate unique values for production!
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET="your-nextauth-secret-here"
NEXTAUTH_URL=http://localhost:3000
SALT="your-salt-here"

# Encryption key - MUST be 64 hex characters (32 bytes)
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY=0000000000000000000000000000000000000000000000000000000000000000

# ============================================
# Langfuse - Initialization (Optional)
# ============================================
# Pre-initialize organization, project, and user on first start
LANGFUSE_INIT_ORG_ID=my-org
LANGFUSE_INIT_ORG_NAME=My Organization
LANGFUSE_INIT_PROJECT_ID=my-project
LANGFUSE_INIT_PROJECT_NAME="My Project"
LANGFUSE_INIT_PROJECT_PUBLIC_KEY=pk-your-public-key
LANGFUSE_INIT_PROJECT_SECRET_KEY=sk-your-secret-key
LANGFUSE_INIT_USER_EMAIL=admin@example.com
LANGFUSE_INIT_USER_NAME=Admin
# Generate with: `openssl rand -base64 24 | tr -d '/+=' | head -c 32`
LANGFUSE_INIT_USER_PASSWORD=your-langfuse-admin-password

# ============================================
# Langfuse - SDK Configuration (for API service)
# ============================================
# Get these from Langfuse UI: Settings -> API Keys
# Or use the INIT values above for local dev
LANGFUSE_HOST=http://localhost:3000
LANGFUSE_PUBLIC_KEY=pk-your-public-key
LANGFUSE_SECRET_KEY=sk-your-secret-key

# ============================================
# Azure AI Foundry - Multi-Region Configuration
# ============================================
# See AZURE-AI-FOUNDRY-SETUP.md for detailed guidance

# --- Region: East US ---
AZURE_AI_EASTUS_ENDPOINT=https://your-eastus-resource.openai.azure.com/
AZURE_AI_EASTUS_API_KEY=your-eastus-api-key
AZURE_AI_EASTUS_MODELS=gpt-4o,gpt-4o-mini,text-embedding-ada-002

# --- Region: East US 2 (optional additional region) ---
AZURE_AI_EASTUS2_ENDPOINT=https://your-eastus2-resource.openai.azure.com/
AZURE_AI_EASTUS2_API_KEY=your-eastus2-api-key
AZURE_AI_EASTUS2_MODELS=gpt-4o,text-embedding-3-large

# --- Model Routing ---
# JSON mapping: model name -> region
AZURE_AI_MODEL_ROUTING={"gpt-4o":"eastus","gpt-4o-mini":"eastus","text-embedding-ada-002":"eastus","text-embedding-3-large":"eastus2"}

# --- Defaults ---
AZURE_AI_DEFAULT_MODEL=gpt-4o-mini
AZURE_AI_DEFAULT_REGION=eastus
AZURE_OPENAI_API_VERSION=2025-04-01-preview

# --- Embeddings ---
# Available Azure OpenAI embedding models and their dimensions:
#   text-embedding-ada-002  → 1536 dimensions (legacy, lowest cost)
#   text-embedding-3-small  → 1536 dimensions (recommended, best cost/performance)
#   text-embedding-3-large  → 3072 dimensions (highest quality, higher cost)
# Note: Model must be deployed in Azure AI Foundry and listed in MODEL_ROUTING above
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSIONS=1536

# ============================================
# Microsoft Entra ID (User Authentication)
# ============================================
# These come from your App Registration in Azure Portal
AZURE_TENANT_ID=your-tenant-id
AZURE_CLIENT_ID=your-client-id
AZURE_CLIENT_SECRET=your-client-secret

# Redirect URI (must match App Registration)
AZURE_REDIRECT_URI=http://localhost:8000/auth/callback

# ============================================
# Observability
# ============================================
# OpenTelemetry collector endpoint (optional)
OTLP_ENDPOINT=http://localhost:4317

# ============================================
# Rate Limiting
# ============================================
RATE_LIMIT_TPM=100000
RATE_LIMIT_RPM=60

# ============================================
# Semantic Caching
# ============================================
SEMANTIC_CACHE_ENABLED=true
SEMANTIC_CACHE_THRESHOLD=0.95
SEMANTIC_CACHE_TTL=3600
