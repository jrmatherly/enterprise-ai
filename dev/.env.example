# Enterprise AI Platform - Environment Variables
# Copy to dev/.env and fill in your values
#
# Generate secrets:
#   openssl rand -base64 32        # For NEXTAUTH_SECRET, SALT, passwords
#   openssl rand -hex 32           # For ENCRYPTION_KEY (must be 64 hex chars)
#
# Full documentation: docs/setup/ENVIRONMENT-VARIABLES.md

# ============================================
# Application
# ============================================
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=DEBUG
LOG_FORMAT=console  # "console" or "json"

# API Server (for running outside Docker)
API_HOST=0.0.0.0
API_PORT=8000

# Application database name (created by init script alongside 'langfuse')
APP_DB=eai

# ============================================
# PostgreSQL
# ============================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=changeme-generate-random
# Langfuse uses 'langfuse' db, our app uses 'eai' db (created by init script)
POSTGRES_DB=langfuse
# Application database URL (uses APP_DB database)
DATABASE_URL=postgresql+asyncpg://postgres:YOUR_PASSWORD@localhost:5432/eai

# ============================================
# ClickHouse (Langfuse v3)
# ============================================
CLICKHOUSE_USER=clickhouse
CLICKHOUSE_PASSWORD=changeme-generate-random

# ============================================
# Redis
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_AUTH=changeme-generate-random

# ============================================
# Qdrant (Vector Database)
# ============================================
QDRANT_URL=http://localhost:6333
QDRANT_COLLECTION=documents
# QDRANT_API_KEY=  # Optional: API key if Qdrant auth is enabled

# ============================================
# MinIO (S3-compatible storage)
# ============================================
MINIO_ROOT_USER=minio
MINIO_ROOT_PASSWORD=changeme-generate-random

# ============================================
# Langfuse - Server Configuration
# ============================================
NEXTAUTH_SECRET=changeme-generate-with-openssl-rand-base64-32
NEXTAUTH_URL=http://localhost:3000
SALT=changeme-generate-with-openssl-rand-base64-32
# MUST be exactly 64 hex characters: openssl rand -hex 32
ENCRYPTION_KEY=0000000000000000000000000000000000000000000000000000000000000000

# ============================================
# Langfuse - Project Initialization
# ============================================
# Auto-create org/project on first boot (recommended for dev)
LANGFUSE_INIT_ORG_ID=my-org
LANGFUSE_INIT_ORG_NAME=My Organization
LANGFUSE_INIT_PROJECT_ID=my-project
LANGFUSE_INIT_PROJECT_NAME=My Project
LANGFUSE_INIT_PROJECT_PUBLIC_KEY=pk-changeme
LANGFUSE_INIT_PROJECT_SECRET_KEY=sk-changeme
LANGFUSE_INIT_USER_EMAIL=admin@example.com
LANGFUSE_INIT_USER_NAME=Admin
LANGFUSE_INIT_USER_PASSWORD=changeme-generate-random

# ============================================
# Langfuse - SDK Configuration (for API service)
# ============================================
# Get these from Langfuse UI: Settings -> API Keys
LANGFUSE_HOST=http://localhost:3000
LANGFUSE_PUBLIC_KEY=pk-your-public-key
LANGFUSE_SECRET_KEY=sk-your-secret-key

# ============================================
# Azure AI Foundry - Multi-Region Configuration
# ============================================
# See docs/setup/AZURE-AI-FOUNDRY-SETUP.md for detailed guidance

# --- Region: East US (primary) ---
AZURE_AI_EASTUS_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_AI_EASTUS_API_KEY=your-api-key
AZURE_AI_EASTUS_MODELS=gpt-4o-mini,text-embedding-3-small

# --- Region: East US 2 ---
AZURE_AI_EASTUS2_ENDPOINT=https://your-resource-2.openai.azure.com/
AZURE_AI_EASTUS2_API_KEY=your-api-key
AZURE_AI_EASTUS2_MODELS=gpt-4o,text-embedding-3-large

# --- Model Routing ---
# JSON mapping: model name -> region
AZURE_AI_MODEL_ROUTING={"gpt-4o-mini":"eastus","text-embedding-3-small":"eastus"}

# --- Defaults ---
AZURE_AI_DEFAULT_MODEL=gpt-4o-mini
AZURE_AI_DEFAULT_REGION=eastus
AZURE_OPENAI_API_VERSION=2025-04-01-preview

# --- Embeddings ---
# Available Azure OpenAI embedding models and their dimensions:
#   text-embedding-ada-002  → 1536 dimensions (legacy, lowest cost)
#   text-embedding-3-small  → 1536 dimensions (recommended, best cost/performance)
#   text-embedding-3-large  → 3072 dimensions (highest quality, higher cost)
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSIONS=1536

# ============================================
# Microsoft Entra ID (User Authentication)
# ============================================
# From Azure Portal > App Registrations
AZURE_TENANT_ID=your-tenant-id
AZURE_CLIENT_ID=your-client-id
AZURE_CLIENT_SECRET=your-client-secret
# Redirect URI (must match App Registration)
AZURE_REDIRECT_URI=http://localhost:8000/auth/callback

# ============================================
# Observability
# ============================================
# OpenTelemetry collector endpoint
OTLP_ENDPOINT=http://localhost:4317

# ============================================
# Rate Limiting
# ============================================
RATE_LIMIT_TPM=100000
RATE_LIMIT_RPM=60

# ============================================
# Session Management
# ============================================
MAX_SESSIONS_PER_USER=50
SESSION_AUTO_CLEANUP=true

# ============================================
# Semantic Caching
# ============================================
SEMANTIC_CACHE_ENABLED=true
SEMANTIC_CACHE_THRESHOLD=0.95
SEMANTIC_CACHE_TTL=3600
