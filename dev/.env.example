# Enterprise AI Platform - Environment Variables
# Copy this file to .env and update values for your environment
#
# Generate secrets with:
#   openssl rand -base64 32  (for NEXTAUTH_SECRET, SALT)
#   openssl rand -hex 32     (for ENCRYPTION_KEY)
#   openssl rand -base64 24 | tr -d '/+=' | head -c 32  (for passwords)

# ============================================
# Application
# ============================================
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=DEBUG
LOG_FORMAT=console  # "console" or "json"

# API Server (for running outside Docker)
API_HOST=0.0.0.0
API_PORT=8000

# ============================================
# PostgreSQL
# ============================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=changeme-generate-random
# Langfuse uses 'langfuse' db, our app uses 'eai' db (created by init script)
POSTGRES_DB=langfuse
# Application database URL (uses 'eai' database)
DATABASE_URL=postgresql+asyncpg://postgres:changeme-generate-random@localhost:5432/eai

# ============================================
# ClickHouse (Langfuse v3)
# ============================================
CLICKHOUSE_USER=clickhouse
CLICKHOUSE_PASSWORD=changeme-generate-random

# ============================================
# Redis
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_AUTH=changeme-generate-random

# ============================================
# Qdrant (Vector Database)
# ============================================
QDRANT_URL=http://localhost:6333
QDRANT_COLLECTION=documents
# QDRANT_API_KEY=  # Optional: API key if Qdrant auth is enabled

# ============================================
# MinIO (S3-compatible storage)
# ============================================
MINIO_ROOT_USER=minio
MINIO_ROOT_PASSWORD=changeme-generate-random

# ============================================
# Langfuse - Server Configuration
# ============================================
# IMPORTANT: Generate unique values for production!
NEXTAUTH_SECRET=changeme-generate-with-openssl-rand-base64-32
NEXTAUTH_URL=http://localhost:3000
SALT=changeme-generate-with-openssl-rand-base64-32

# Encryption key - MUST be 64 hex characters (32 bytes)
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY=0000000000000000000000000000000000000000000000000000000000000000

# ============================================
# Langfuse - Project Initialization (optional)
# ============================================
# Uncomment and set to auto-create org/project on first boot
# LANGFUSE_INIT_ORG_ID=my-org
# LANGFUSE_INIT_ORG_NAME=My Organization
# LANGFUSE_INIT_PROJECT_ID=my-project
# LANGFUSE_INIT_PROJECT_NAME=My Project
# LANGFUSE_INIT_PROJECT_PUBLIC_KEY=pk-xxx
# LANGFUSE_INIT_PROJECT_SECRET_KEY=sk-xxx
# LANGFUSE_INIT_USER_EMAIL=admin@example.com
# LANGFUSE_INIT_USER_NAME=Admin
# LANGFUSE_INIT_USER_PASSWORD=changeme

# ============================================
# Langfuse - SDK Configuration (for API service)
# ============================================
# Get these from Langfuse UI: Settings -> API Keys
LANGFUSE_HOST=http://localhost:3000
LANGFUSE_PUBLIC_KEY=
LANGFUSE_SECRET_KEY=

# ============================================
# Azure AI Foundry - Multi-Region Configuration
# ============================================
# See AZURE-AI-FOUNDRY-SETUP.md for detailed guidance

# --- Region: East US ---
AZURE_AI_EASTUS_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_AI_EASTUS_API_KEY=your-api-key
AZURE_AI_EASTUS_MODELS=gpt-4o-mini,text-embedding-3-small

# --- Region: East US 2 (optional) ---
# AZURE_AI_EASTUS2_ENDPOINT=https://your-resource-2.openai.azure.com/
# AZURE_AI_EASTUS2_API_KEY=your-api-key
# AZURE_AI_EASTUS2_MODELS=gpt-4o,text-embedding-3-large

# --- Model Routing ---
# JSON mapping: model name -> region
AZURE_AI_MODEL_ROUTING={"gpt-4o-mini":"eastus","text-embedding-3-small":"eastus"}

# --- Defaults ---
AZURE_AI_DEFAULT_MODEL=gpt-4o-mini
AZURE_AI_DEFAULT_REGION=eastus
AZURE_OPENAI_API_VERSION=2025-04-01-preview

# ============================================
# Microsoft Entra ID (User Authentication)
# ============================================
# These come from your App Registration in Azure Portal
AZURE_TENANT_ID=your-tenant-id
AZURE_CLIENT_ID=your-client-id
AZURE_CLIENT_SECRET=your-client-secret

# Redirect URI (must match App Registration)
AZURE_REDIRECT_URI=http://localhost:8000/auth/callback

# ============================================
# Observability
# ============================================
# OpenTelemetry collector endpoint (optional)
# OTLP_ENDPOINT=http://localhost:4317

# ============================================
# Rate Limiting
# ============================================
DEFAULT_TPM_LIMIT=100000
DEFAULT_RPM_LIMIT=60

# ============================================
# Semantic Caching
# ============================================
SEMANTIC_CACHE_ENABLED=true
SEMANTIC_CACHE_THRESHOLD=0.95
SEMANTIC_CACHE_TTL=3600
